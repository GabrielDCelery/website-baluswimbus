var AdminApp=angular.module("AdminApp",["ngRoute","ngCookies","AuthCtrl","AuthFactory"]);AdminApp.config(["$routeProvider","$locationProvider",function(e,t){e.when("/posts",{templateUrl:"templates/_posts.html"}).when("/addnew",{templateUrl:"templates/_addnew.html"}).otherwise({redirectTo:"/"})}]);var AuthCtrl=angular.module("AuthCtrl",[]);AuthCtrl.controller("AuthCtrl",["$scope","AuthFactory",function(e,t){function o(o,r){t.login(o,r,function(n){n.data?(e.loggedIn=!0,t.setLoginCookie(o,r)):e.loggedIn=!1})}function r(){e.loggedIn=!1,t.clearLoginCookie()}function n(e){t.getLoginCookie(e)}e.loggedIn=!1,e.login=o,e.logout=r,n(o)}]);var AuthFactory=angular.module("AuthFactory",[]);AuthFactory.factory("AuthFactory",["$http","$cookies",function(e,t){function o(t,o,r){e.post("php/login.php",{username:t,password:o}).success(r)}function r(e,o){var r=a.encode(e),n=a.encode(o),i={username:r,password:n};t.putObject("userCookie",i)}function n(){t.remove("userCookie")}function i(e){var o=t.getObject("userCookie");if(o){var r=a.decode(o.username),n=a.decode(o.password);e(r,n)}}var a={keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,o,r,n,i,a="",c="",h="",d=0;do t=e.charCodeAt(d++),o=e.charCodeAt(d++),c=e.charCodeAt(d++),r=t>>2,n=(3&t)<<4|o>>4,i=(15&o)<<2|c>>6,h=63&c,isNaN(o)?i=h=64:isNaN(c)&&(h=64),a=a+this.keyStr.charAt(r)+this.keyStr.charAt(n)+this.keyStr.charAt(i)+this.keyStr.charAt(h),t=o=c="",r=n=i=h="";while(d<e.length);return a},decode:function(e){var t,o,r,n,i,a="",c="",h="",d=0,u=/[^A-Za-z0-9\+\/\=]/g;u.exec(e)&&window.alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do r=this.keyStr.indexOf(e.charAt(d++)),n=this.keyStr.indexOf(e.charAt(d++)),i=this.keyStr.indexOf(e.charAt(d++)),h=this.keyStr.indexOf(e.charAt(d++)),t=r<<2|n>>4,o=(15&n)<<4|i>>2,c=(3&i)<<6|h,a+=String.fromCharCode(t),64!=i&&(a+=String.fromCharCode(o)),64!=h&&(a+=String.fromCharCode(c)),t=o=c="",r=n=i=h="";while(d<e.length);return a}};return{login:o,setLoginCookie:r,clearLoginCookie:n,getLoginCookie:i}}]);