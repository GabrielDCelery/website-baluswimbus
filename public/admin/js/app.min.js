var AdminApp=angular.module("AdminApp",["ngRoute","ngCookies","AuthCtrl","AuthFactory","AddNewCtrl","ui.tinymce","DatabaseFactory","TextEditorFactory","AlertsFactory"]);AdminApp.config(["$routeProvider","$locationProvider",function(t,e){t.when("/posts",{templateUrl:"templates/_posts.html"}).when("/addnew",{templateUrl:"templates/_addnew.html",controller:"AddNewCtrl"}).otherwise({redirectTo:"/"})}]);var AuthCtrl=angular.module("AuthCtrl",[]);AuthCtrl.controller("AuthCtrl",["$scope","AuthFactory",function(t,e){function r(r,o){e.login(r,o,function(a){a.data?(t.loggedIn=!0,e.setLoginCookie(r,o)):t.loggedIn=!1})}function o(){t.loggedIn=!1,e.clearLoginCookie()}function a(t){e.getLoginCookie(t)}t.loggedIn=!1,t.login=r,t.logout=o,a(r)}]);var AuthFactory=angular.module("AuthFactory",[]);AuthFactory.factory("AuthFactory",["$http","$cookies",function(t,e){function r(e,r,o){t.post("php/login.php",{username:e,password:r}).success(o)}function o(t,r){var o=i.encode(t),a=i.encode(r),n={username:o,password:a};e.putObject("userCookie",n)}function a(){e.remove("userCookie")}function n(t){var r=e.getObject("userCookie");if(r){var o=i.decode(r.username),a=i.decode(r.password);t(o,a)}}var i={keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var e,r,o,a,n,i="",c="",d="",s=0;do e=t.charCodeAt(s++),r=t.charCodeAt(s++),c=t.charCodeAt(s++),o=e>>2,a=(3&e)<<4|r>>4,n=(15&r)<<2|c>>6,d=63&c,isNaN(r)?n=d=64:isNaN(c)&&(d=64),i=i+this.keyStr.charAt(o)+this.keyStr.charAt(a)+this.keyStr.charAt(n)+this.keyStr.charAt(d),e=r=c="",o=a=n=d="";while(s<t.length);return i},decode:function(t){var e,r,o,a,n,i="",c="",d="",s=0,u=/[^A-Za-z0-9\+\/\=]/g;u.exec(t)&&window.alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do o=this.keyStr.indexOf(t.charAt(s++)),a=this.keyStr.indexOf(t.charAt(s++)),n=this.keyStr.indexOf(t.charAt(s++)),d=this.keyStr.indexOf(t.charAt(s++)),e=o<<2|a>>4,r=(15&a)<<4|n>>2,c=(3&n)<<6|d,i+=String.fromCharCode(e),64!=n&&(i+=String.fromCharCode(r)),64!=d&&(i+=String.fromCharCode(c)),e=r=c="",o=a=n=d="";while(s<t.length);return i}};return{login:r,setLoginCookie:o,clearLoginCookie:a,getLoginCookie:n}}]);var AddNewCtrl=angular.module("AddNewCtrl",[]);AddNewCtrl.controller("AddNewCtrl",["$scope","TextEditor","Database","Alerts",function(t,e,r,o){function a(a){t.postData.input=e.checkInput(t.tinymceModel),t.postData.status=a,r.addNewPost(t.postData,function(t){o.checkSuccess(t.data)})}t.postData={title:"",date:new Date,input:"",status:""},tinyMCE.init({selector:"textarea",height:350}),t.addNewPost=a}]);var DatabaseFactory=angular.module("DatabaseFactory",[]);DatabaseFactory.factory("Database",["$http",function(t){function e(e,r){t.post("php/save_post.php",e).then(r)}return{addNewPost:e}}]);var TextEditorFactory=angular.module("TextEditorFactory",[]);TextEditorFactory.factory("TextEditor",["$http",function(t){function e(t){return t||(t=tinyMCE.activeEditor.getContent()),t}return{checkInput:e}}]);var AlertsFactory=angular.module("AlertsFactory",[]);AlertsFactory.factory("Alerts",["$http",function(t){function e(t){1==t?alert("Feladat sikeresen végrehajtva!"):alert("Nem sikerült a feladatot végehajtani!")}return{checkSuccess:e}}]);